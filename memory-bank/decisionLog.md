# Журнал решений

## 2025-07-24 19:16 (UTC+3)
- **Решение:** Создание структуры Memory Bank
- **Обоснование:** Для сохранения контекста проекта и истории принятия решений
- **Последствия:** Упростит поддержку проекта и обеспечит преемственность разработки
- **Альтернативы:** Рассматривалось использование существующих систем документации, но решено создать специализированную систему для проекта

## 2025-07-24 19:19 (UTC+3)
- **Решение:** Детализация информации в Memory Bank
- **Обоснование:** Для улучшения понимания проекта новыми участниками и моделями ИИ
- **Последствия:** Ускорение онбординга, снижение когнитивной нагрузки при работе с кодом
- **Детали:** 
  - Добавлена информация о технологическом стеке
  - Включены диаграммы потоков данных
  - Добавлены примеры реализации кода
- **Альтернативы:** Можно было ограничиться общей информацией, но детализация признана необходимой


## 2025-07-24 19:30 (UTC+3)
- **Решение:** Исправление проблемы с часовыми поясами в записи времени кормления
- **Проблема:** Время кормления записывалось в UTC вместо московского времени (UTC+3), что приводило к отображению времени на 3 часа раньше
- **Обоснование:** Пользователи находятся в московском часовом поясе и ожидают видеть корректное местное время
- **Реализация:** 
  - Создана функция `getMoscowTime()` для получения времени в UTC+3
  - Обновлены методы: `createFeeding()`, `createUser()`, `setSetting()`, `createScheduledFeeding()`, `cleanupOldScheduledFeedings()`
  - Заменено использование `CURRENT_TIMESTAMP` на явную передачу московского времени
- **Последствия:** Все новые записи будут создаваться с корректным московским временем

## 2025-07-27 15:26 (UTC+3)
- **Решение:** Исправление проблемы с часовыми поясами в таймере
- **Проблема:** Время следующего кормления рассчитывалось с использованием Date.now(), который возвращает UTC время, а не московское
- **Обоснование:** Пользователи находятся в московском часовом поясе и ожидают видеть корректное местное время
- **Реализация:** 
  - Добавлен импорт функции toMoscowTime в timer.ts
  - Обновлены методы restartWithNewInterval() и startFeedingTimer() для использования toMoscowTime()
- **Последствия:** Время следующего кормления теперь будет отображаться корректно в московском часовом поясе
